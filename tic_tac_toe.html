<!DOCTYPE html>
<html>
	<head>
		<title>
			Tic-Tac-Toe
		</title>
		<script>
		
		function Mymove(idValue){
			var flag=0;
   	 		var image = document.getElementById(idValue);
    		if (image.src.match("blank.png")) {
    	    	image.src = "X.png";
    	    	flag=Check();
    	    	if (flag==1) {
	   				alert("You Won");
	   				reset();
	   				return;
		   		}
    	
				machineLearning(idValue);
    	    	}
    	    }
	   	
		function Check(){
			var count=0;
	   		for (var i =0 ; i <= 7;i++) {
	   			var image=document.getElementById(winList[i].a);
	   			if (!image.src.match("blank.png")) {
	   			if(image.src==document.getElementById(winList[i].b).src && image.src==document.getElementById(winList[i].c).src)
	   					return 1;
	   			}
	   		}
	   		for (var i = 9 ; i >= 1; i--) {
	   			if(document.getElementById(i).src.match("blank.png"))
	   				break;
	   			else
	   				count++;
	   			}
	   		if(count==9)
	   		{
	   			alert("Match Draw");
	   			reset();
	   		}
	   		//return false;
	   	}

	   	function reset()
	   	{
	   		/*for (var i =1; i<=9; i++) {
	   			var image=document.getElementById(i);
	   			image.src="blank.png";
	   			 		};
	   			 		MyMove=0;*/
	   			 		location.reload();
	   	}
	
		var MyMove=0;
		function machineLearning(idValue) //Computer Move
		{
			var isComputerDone=false;
			if (document.getElementById("5").src.match("blank.png")) {
						document.getElementById("5").src="O.png";
						 assignCheck();
						 isComputerDone=true;
						 MyMove++;
						
			}
			if (MyMove>=2) {
				for(var i=0;i<=7;i++){
				
				  if(document.getElementById(winList[i].a).src.match("O.png") && 
				     document.getElementById(winList[i].b).src.match("O.png") && 
				     document.getElementById(winList[i].c).src.match("blank.png"))
				  {
				   document.getElementById(winList[i].c).src="O.png";
				   isComputerDone=true;
				   MyMove++;
				   assignCheck();
			  	  }
			  	  else if(document.getElementById(winList[i].a).src.match("O.png") && 
			  	          document.getElementById(winList[i].b).src.match("blank.png")&& 
			  	          document.getElementById(winList[i].c).src.match("O.png"))
			  	  {
			    	document.getElementById(winList[i].b).src="O.png";
					isComputerDone=true;
					MyMove++;
					assignCheck();
			  	  }
			  	  else if(document.getElementById(winList[i].a).src.match("blank.png") && 
			  	          document.getElementById(winList[i].b).src.match("O.png") && 
			  	          document.getElementById(winList[i].c).src.match("O.png"))
			  	  {
			    	document.getElementById(winList[i].a).src="O.png";
			     	isComputerDone=true;
			     	MyMove++;
				 	assignCheck();
			  	  }
			  	}
			}


			if (MyMove>=1)
			{



				for(var i=0;i<=7;i++){
				if(isComputerDone)
				{
					break;
				}
				else
				{
				  if(document.getElementById(winList[i].a).src.match("X.png") && 
				     document.getElementById(winList[i].b).src.match("X.png")&& 
				     document.getElementById(winList[i].c).src.match("blank.png"))
				  {
				   document.getElementById(winList[i].c).src="O.png";
				   isComputerDone=true;
				   MyMove++;
				   assignCheck();
			   
			  	  }
			  	  else if(document.getElementById(winList[i].a).src.match("X.png") && 
			  	          document.getElementById(winList[i].b).src.match("blank.png")&& 
			  	          document.getElementById(winList[i].c).src.match("X.png"))
			  	  {
			    	document.getElementById(winList[i].b).src="O.png";
					isComputerDone=true;
					MyMove++;
					assignCheck();
			  	  }
			  	  else if(document.getElementById(winList[i].a).src.match("blank.png") && 
			  	          document.getElementById(winList[i].b).src.match("X.png")&& 
			  	          document.getElementById(winList[i].c).src.match("X.png"))
			  	  {
			    	document.getElementById(winList[i].a).src="O.png";
			     	isComputerDone=true;
			     	MyMove++;
				 	assignCheck();
			  	  }
			  	}
				}
			}	

		if(MyMove<2 && !isComputerDone)
		{
			var corrner =[1,3,7,9];
			

			if (document.getElementById("5").src.match("X.png")) {
				for(var i =0;i<4;i++){
					if(document.getElementById(corrner[i]).src.match("blank.png"))	{
						document.getElementById(corrner[i]).src="O.png";
						 assignCheck();
						 isComputerDone=true;
						 MyMove++;
						break;
						break;
					}
				}
			}
		}

		
			if(!isComputerDone){
				 selectRandomCell();
				}	
		}
		
		function selectRandomCell(){
		var emptyList=[];
		var count=0;
		  for(var i=1;i<=9;i++){
			if(document.getElementById(i).src.match("blank.png")){
				emptyList.push(i);
				count++;
			}
		  }
		  var rand =Math.round(Math.random() * count);
		  document.getElementById(emptyList[rand]).src="O.png";
		  assignCheck();
		}

		function assignCheck()
		{
		var  flag=Check();
			if(flag==1)			{
				alert("Computer Won");
				reset();
				return 0;
			}
		}
		var winList =[
		{a:1,b:2,c:3},
		{a:4,b:5,c:6},
		{a:7,b:8,c:9},
		{a:1,b:4,c:7},
		{a:2,b:5,c:8},
		{a:3,b:6,c:9},
		{a:1,b:5,c:9},
		{a:3,b:5,c:7}];
		
		</script>
		
	<link rel="stylesheet" type="text/css" href="style.css"> 
	</head>
	<body>
		<div align="center">
			<img src="XO.png" alt="Page Heading" style="width:304px;height:228px"/>		
			</div>
		<div id="divTable">
		<table align="center">
			<tr>
				<td>
					<img id="1" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="2" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="3" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
			</tr>
			<tr>
				<td>
					<img id="4" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="5" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="6" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
			</tr>
			<tr>
				<td>
					<img id="7" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="8" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
				<td>
					<img id="9" onclick="Mymove(this.id)" src="blank.png" width="105" height="105">
				</td>
			</tr>
		</table>
		</div>
		

	</body>
</html>
